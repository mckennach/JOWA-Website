var z=Object.defineProperty;var __=Object.getOwnPropertyDescriptor;var t_=Object.getOwnPropertyNames;var e_=Object.prototype.hasOwnProperty;var n_=(s,p)=>()=>(s&&(p=s(s=0)),p);var K=(s,p,T,x)=>{if(p&&typeof p=="object"||typeof p=="function")for(let E of t_(p))!e_.call(s,E)&&E!==T&&z(s,E,{get:()=>p[E],enumerable:!(x=__(p,E))||x.enumerable});return s},W=(s,p,T)=>(K(s,p,"default"),T&&K(T,p,"default"));var c_=s=>K(z({},"__esModule",{value:!0}),s);var U={};import*as qt from"async_hooks";var J=n_(()=>{W(U,qt)});import{__getNamedExports as o_}from"../../../__next-on-pages-dist__/webpack/8547358e8066fcbdc1d72ed988eb7b53.js";import{__getNamedExports as r_}from"../../../__next-on-pages-dist__/webpack/1d2470119d4f846d0a077893f2422c32.js";import{__getNamedExports as u_}from"../../../__next-on-pages-dist__/webpack/26df63ef8f6dd468813d90c00f151653.js";import{__getNamedExports as s_}from"../../../__next-on-pages-dist__/webpack/473.js";import{__getNamedExports as a_}from"../../../__next-on-pages-dist__/webpack/327535d9985b1b6fd3034fcc6252330e.js";import{__getNamedExports as h_}from"../../../__next-on-pages-dist__/webpack/cb714c5ac1085aea0c791f3092b19633.js";import{__getNamedExports as i_}from"../../../__next-on-pages-dist__/webpack/2b30c58ce9f34de3b30e5d507e642278.js";import{__getNamedExports as k_}from"../../../__next-on-pages-dist__/manifest/537259e2ed205f5a7994cb4f05664668.js";var a=globalThis.__nextOnPagesRoutesIsolation.getProxyFor("/api/preview"),m=o_(a,a,a),p_=m.__chunk_7769,d_=m.__chunk_4352,f_=m.__chunk_75,l_=m.__chunk_5679,g_=m.__chunk_7910,m_=m.__chunk_5687,x_=m.__chunk_2179,E_=m.__chunk_3625,b_=m.__chunk_5653,v_=m.__chunk_2031,y_=m.__chunk_43,w_=m.__chunk_7320,N_=m.__chunk_1492,O_=m.__chunk_5645,P_=m.__chunk_2142,j_=m.__chunk_758,R_=m.__chunk_8161,Q=r_(a,a,a),S_=Q.__chunk_9985,A_=Q.__chunk_4155,$=u_(a,a,a),I_=$.__chunk_6195,C_=$.__chunk_2067,T_=$.__chunk_5558,M_=$.__chunk_5303,F_=$.__chunk_5228,L_=s_(a,a,a),U_=L_.__chunk_473,h=a_(a,a,a),$_=h.__chunk_1730,D_=h.__chunk_3818,B_=h.__chunk_7037,q_=h.__chunk_5577,X_=h.__chunk_7852,G_=h.__chunk_9206,H_=h.__chunk_989,K_=h.__chunk_1863,W_=h.__chunk_3039,Z_=h.__chunk_9573,z_=h.__chunk_7701,J_=h.__chunk_662,Q_=h.__chunk_7444,V_=h.__chunk_4591,Y_=h.__chunk_7502,_t=h.__chunk_8408,tt=h.__chunk_2561,et=h.__chunk_4834,nt=h.__chunk_2988,ct=h.__chunk_2039,ot=h.__chunk_5028,rt=h.__chunk_9548,ut=h.__chunk_6914,st=h.__chunk_7960,at=h.__chunk_5996,ht=h.__chunk_4337,V=h_(a,a,a),it=V.__chunk_6947,kt=V.__chunk_513,i=i_(a,a,a),pt=i.__chunk_5405,dt=i.__chunk_7322,ft=i.__chunk_2296,lt=i.__chunk_4101,gt=i.__chunk_6776,mt=i.__chunk_8042,xt=i.__chunk_3665,Et=i.__chunk_6991,bt=i.__chunk_8816,vt=i.__chunk_4861,yt=i.__chunk_4828,wt=i.__chunk_8585,Nt=i.__chunk_4069,Ot=i.__chunk_5927,Pt=i.__chunk_6202,jt=i.__chunk_4363,Rt=i.__chunk_8264,St=i.__chunk_1583,At=i.__chunk_7908,It=i.__chunk_8949,Ct=i.__chunk_796,Tt=i.__chunk_1651,Mt=i.__chunk_5105,Ft=i.__chunk_9642,Lt=i.__chunk_8819,Ut=i.__chunk_676,Y=k_(a,a,a),$t=Y.__NEXT_FONT_MANIFEST,Dt=Y.__REACT_LOADABLE_MANIFEST,Qt=((s,p,T)=>(p._ENTRIES={},s.__BUILD_MANIFEST={polyfillFiles:["static/chunks/polyfills-42372ed130431b0a.js"],devFiles:[],ampDevFiles:[],lowPriorityFiles:[],rootMainFiles:["static/chunks/webpack-2e8955a2344bdf69.js","static/chunks/fd9d1056-efbf6084010ae992.js","static/chunks/30-4cb4a08ee7b77e96.js","static/chunks/main-app-25589dfa302e1d38.js"],pages:{"/_app":["static/chunks/webpack-2e8955a2344bdf69.js","static/chunks/framework-f66176bb897dc684.js","static/chunks/main-4e935208c1b4e43d.js","static/chunks/pages/_app-72b849fbd24ac258.js"],"/_error":["static/chunks/webpack-2e8955a2344bdf69.js","static/chunks/framework-f66176bb897dc684.js","static/chunks/main-4e935208c1b4e43d.js","static/chunks/pages/_error-7ba65e1336b92748.js"]},ampFirstPages:[]},s.__BUILD_MANIFEST.lowPriorityFiles=["/static/O5prW5JTBuDN3ocXyjpaU/_buildManifest.js",,"/static/O5prW5JTBuDN3ocXyjpaU/_ssgManifest.js"],s.__REACT_LOADABLE_MANIFEST=Dt,s.__NEXT_FONT_MANIFEST=$t,s.__INTERCEPTION_ROUTE_REWRITE_MANIFEST="[]",(()=>{"use strict";var x={},E={};function e(t){var r=E[t];if(r!==void 0)return r.exports;var n=E[t]={exports:{}},d=!0;try{x[t].call(n.exports,n,n.exports,e),d=!1}finally{d&&delete E[t]}return n.exports}e.m=x,e.amdO={},(()=>{var t=[];e.O=(r,n,d,l)=>{if(n){l=l||0;for(var k=t.length;k>0&&t[k-1][2]>l;k--)t[k]=t[k-1];t[k]=[n,d,l];return}for(var f=1/0,k=0;k<t.length;k++){for(var[n,d,l]=t[k],b=!0,v=0;v<n.length;v++)f>=l&&Object.keys(e.O).every(C=>e.O[C](n[v]))?n.splice(v--,1):(b=!1,l<f&&(f=l));if(b){t.splice(k--,1);var O=d();O!==void 0&&(r=O)}}return r}})(),e.n=t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},(()=>{var t,r=Object.getPrototypeOf?n=>Object.getPrototypeOf(n):n=>n.__proto__;e.t=function(n,d){if(1&d&&(n=this(n)),8&d||typeof n=="object"&&n&&(4&d&&n.__esModule||16&d&&typeof n.then=="function"))return n;var l=Object.create(null);e.r(l);var k={};t=t||[null,r({}),r([]),r(r)];for(var f=2&d&&n;typeof f=="object"&&!~t.indexOf(f);f=r(f))Object.getOwnPropertyNames(f).forEach(b=>k[b]=()=>n[b]);return k.default=()=>n,e.d(l,k),l}})(),e.d=(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},e.e=()=>Promise.resolve(),e.g=function(){if(typeof p=="object")return p;try{return this||Function("return this")()}catch{if(typeof window=="object")return window}}(),e.o=(t,r)=>Object.prototype.hasOwnProperty.call(t,r),e.r=t=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t={993:0};e.O.j=d=>t[d]===0;var r=(d,l)=>{var k,f,[b,v,O]=l,S=0;if(b.some(F=>t[F]!==0)){for(k in v)e.o(v,k)&&(e.m[k]=v[k]);if(O)var M=O(e)}for(d&&d(l);S<b.length;S++)f=b[S],e.o(t,f)&&t[f]&&t[f][0](),t[f]=0;return e.O(M)},n=s.webpackChunk_N_E=s.webpackChunk_N_E||[];n.forEach(r.bind(null,0)),n.push=r.bind(null,n.push.bind(n))})(),e.nc=void 0})(),(s.webpackChunk_N_E=s.webpackChunk_N_E||[]).push([[856],{676:Ut,8819:Lt,9642:Ft,5105:Mt,1651:Tt,796:Ct,8949:It,7908:At,1583:St,8264:Rt,4363:jt,6202:Pt,5927:Ot,4069:Nt,8585:wt,4828:yt,4861:vt,8816:bt,6991:Et,3665:xt,8042:mt,6776:gt,4101:lt,2296:ft,5228:F_,5303:M_,7322:dt,5558:T_,5405:pt}]),(s.webpackChunk_N_E=s.webpackChunk_N_E||[]).push([[492],{4337:ht,5996:at,7960:st,6914:ut,9548:rt,5028:ot,2039:ct,513:kt,6947:it,2988:nt,4834:et,2561:tt,8408:_t,7502:Y_,4591:V_,7444:Q_,662:J_,7701:z_,9573:Z_,3039:W_,1863:K_,989:H_,9206:G_,7852:X_,5577:q_,7037:B_,3818:D_,1730:$_}]),(s.webpackChunk_N_E=s.webpackChunk_N_E||[]).push([[237],{8161:R_,758:j_,2142:P_,5645:O_,1492:N_,7320:w_,43:y_,2031:v_,5653:b_,3625:E_,473:U_,2179:x_,5687:m_,7910:g_,5679:l_,75:f_,4352:d_}]),(s.webpackChunk_N_E=s.webpackChunk_N_E||[]).push([[963],{2067:C_,6195:I_,9251:(x,E,e)=>{"use strict";e.r(E),e.d(E,{ComponentMod:()=>G,default:()=>H});var t={};e.r(t),e.d(t,{GET:()=>F,dynamic:()=>M});var r={};e.r(r),e.d(r,{originalPathname:()=>q,patchFetch:()=>X,requestAsyncStorage:()=>C,routeModule:()=>A,serverHooks:()=>B,staticGenerationAsyncStorage:()=>D});var n=e(7502),d=e(2561),l=e(4828),k=e(4861),f=e(5653),b=e(7769),v=e(8161),O=e(473),S=e(9985);let M="force-dynamic";async function F(j){let{searchParams:L}=new URL(j.url),w=L.get("secret"),_=L.get("id");if(w!==process.env.HEADLESS_SECRET||!_)return new Response("Invalid token",{status:401});let u=(0,v.ZP)`
  mutation LoginUser {
    login( input: {
      clientMutationId: "uniqueId",
      username: "${process.env.WP_USER}",
      password: "${process.env.WP_APP_PASS}"
    } ) {
      authToken
      user {
        id
        name
      }
    }
  }
`,{login:o}=await(0,b.U)((0,f.S)(u)),c=o.authToken;(0,O.KL)().enable();let y=(0,v.ZP)`
    query GetContentNode($id: ID!) {
      contentNode(id: $id, idType: DATABASE_ID) {
        uri
        status
        databaseId
      }
    }
  `,{contentNode:g}=await(0,b.U)((0,f.S)(y),{id:_},{Authorization:`Bearer ${c}`});if(!g)return new Response("Invalid id",{status:401});let N=S.xk.redirect(`https://jowadotca.wpcomstaging.com${g.status==="draft"?`/preview/${g.databaseId}`:g.uri}`);return N.headers.set("Set-Cookie",`wp_jwt=${c}; path=/;`),N}let A=new d.AppRouteRouteModule({definition:{kind:l.x.APP_ROUTE,page:"/api/preview/route",pathname:"/api/preview",filename:"route",bundlePath:"app/api/preview/route"},resolvedPagePath:"/Users/christophermckenna/Documents/Development/nextjs/jowa-dev/frontend/src/app/api/preview/route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:C,staticGenerationAsyncStorage:D,serverHooks:B}=A,q="/api/preview/route";function X(){return(0,k.XH)({serverHooks:B,staticGenerationAsyncStorage:D})}let G=r,H=n.a.wrap(A)},4155:A_,9985:S_,7769:p_},x=>{var E=t=>x(x.s=t);x.O(0,[856,492,237],()=>E(9251));var e=x.O();(p._ENTRIES=typeof p._ENTRIES>"u"?{}:p._ENTRIES)["middleware_app/api/preview/route"]=e}]),function(){let x={exports:{},loaded:!1};return function(e,t){var r=Object.create,n=Object.defineProperty,d=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,k=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,b=_=>n(_,"__esModule",{value:!0}),v=(_,u)=>{b(_);for(var o in u)n(_,o,{get:u[o],enumerable:!0})},O=(_,u,o)=>{if(u&&typeof u=="object"||typeof u=="function")for(let c of l(u))!f.call(_,c)&&c!=="default"&&n(_,c,{get:()=>u[c],enumerable:!(o=d(u,c))||o.enumerable});return _},S=_=>O(b(n(_!=null?r(k(_)):{},"default",_&&_.__esModule&&"default"in _?{get:()=>_.default,enumerable:!0}:{value:_,enumerable:!0})),_);v(t,{default:()=>H});var M=S((J(),c_(U))),F="@next/request-context",A=Symbol.for(F),C=Symbol.for("internal.storage");function D(){let _=p;if(!_[A]){let u=new M.AsyncLocalStorage,o={get:()=>u.getStore(),[C]:u};_[A]=o}return _[A]}var B=D();function q(_,u){return B[C].run(_,u)}function X(_){let u={};return _&&_.forEach((o,c)=>{u[c]=o,c.toLowerCase()==="set-cookie"&&(u[c]=G(o))}),u}function G(_){let u=[],o=0,c,y,g,N,I;function P(){for(;o<_.length&&/\s/.test(_.charAt(o));)o+=1;return o<_.length}function R(){return y=_.charAt(o),y!=="="&&y!==";"&&y!==","}for(;o<_.length;){for(c=o,I=!1;P();)if(y=_.charAt(o),y===","){for(g=o,o+=1,P(),N=o;o<_.length&&R();)o+=1;o<_.length&&_.charAt(o)==="="?(I=!0,o=N,u.push(_.substring(c,g)),c=o):o=g+1}else o+=1;(!I||o>=_.length)&&u.push(_.substring(c,_.length))}return u}function H(_){let u=_.staticRoutes.map(c=>({regexp:new RegExp(c.namedRegex),page:c.page})),o=_.dynamicRoutes?.map(c=>({regexp:new RegExp(c.namedRegex),page:c.page}))||[];return async function(c,y){let g=new URL(c.url).pathname,N={};if(_.nextConfig?.basePath&&g.startsWith(_.nextConfig.basePath)&&(g=g.replace(_.nextConfig.basePath,"")||"/"),_.nextConfig?.i18n)for(let P of _.nextConfig.i18n.locales){let R=new RegExp(`^/${P}($|/)`,"i");if(g.match(R)){g=g.replace(R,"/")||"/";break}}for(let P of u)if(P.regexp.exec(g)){N.name=P.page;break}if(!N.name){let P=L(g);for(let R of o||[]){if(P&&!L(R.page))continue;let Z=R.regexp.exec(g);if(Z){N={name:R.page,params:Z.groups};break}}}let I=await q({waitUntil:y.waitUntil},()=>p._ENTRIES[`middleware_${_.name}`].default.call({},{request:{url:c.url,method:c.method,headers:X(c.headers),ip:j(c.headers,w.Ip),geo:{city:j(c.headers,w.City,!0),country:j(c.headers,w.Country,!0),latitude:j(c.headers,w.Latitude),longitude:j(c.headers,w.Longitude),region:j(c.headers,w.Region,!0)},nextConfig:_.nextConfig,page:N,body:c.body}}));return I.waitUntil&&y.waitUntil(I.waitUntil),I.response}}function j(_,u,o=!1){let c=_.get(u)||void 0;return o&&c?decodeURIComponent(c):c}function L(_){return _==="/api"||_.startsWith("/api/")}var w;(function(_){_.City="x-vercel-ip-city",_.Country="x-vercel-ip-country",_.Ip="x-real-ip",_.Latitude="x-vercel-ip-latitude",_.Longitude="x-vercel-ip-longitude",_.Region="x-vercel-ip-country-region"})(w||(w={}))}(x,x.exports),x.exports}.call({}).default({name:"app/api/preview/route",staticRoutes:[{page:"/_not-found",regex:"^/_not\\-found(?:/)?$",routeKeys:{},namedRegex:"^/_not\\-found(?:/)?$"},{page:"/robots.txt",regex:"^/robots\\.txt(?:/)?$",routeKeys:{},namedRegex:"^/robots\\.txt(?:/)?$"},{page:"/sitemap.xml",regex:"^/sitemap\\.xml(?:/)?$",routeKeys:{},namedRegex:"^/sitemap\\.xml(?:/)?$"}],dynamicRoutes:[{page:"/[[...slug]]",regex:"^(?:/(.+?))?(?:/)?$",routeKeys:{nxtPslug:"nxtPslug"},namedRegex:"^(?:/(?<nxtPslug>.+?))?(?:/)?$"}],nextConfig:{basePath:""}})))(a,a,a);export{Qt as default};
